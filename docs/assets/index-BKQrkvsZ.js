import{S as je,p as fe,r as L,s as ee,a as Y,n as te,i as ae,b as pe,t as We,f as Ke,c as Ye,d as me,e as ne,h as ge,g as Ve,k as R,l as Te,u as he,R as j,j as h}from"./index-D-h8U_pJ.js";var Je=class extends je{constructor(e,t){super(),this.options=t,this.#s=e,this.#a=null,this.#o=fe(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#n=void 0;#t=void 0;#r;#i;#o;#a;#m;#d;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),ye(this.#e,this.options)?this.#h():this.updateResult(),this.#C())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return le(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return le(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#R(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,i=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof L(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),t._defaulted&&!ee(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const o=this.hasListeners();o&&be(this.#e,i,this.options,t)&&this.#h(),this.updateResult(),o&&(this.#e!==i||L(this.options.enabled,this.#e)!==L(t.enabled,this.#e)||Y(this.options.staleTime,this.#e)!==Y(t.staleTime,this.#e))&&this.#g();const c=this.#y();o&&(this.#e!==i||L(this.options.enabled,this.#e)!==L(t.enabled,this.#e)||c!==this.#l)&&this.#b(c)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),i=this.createResult(t,e);return Ze(this,i)&&(this.#t=i,this.#i=this.options,this.#r=this.#e.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(i,o)=>(this.trackProp(o),t?.(o),o==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(i,o))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),i=this.#s.getQueryCache().build(this.#s,t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#h(e){this.#w();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(te)),t}#g(){this.#v();const e=Y(this.options.staleTime,this.#e);if(ae||this.#t.isStale||!pe(e))return;const i=We(this.#t.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#t.isStale||this.updateResult()},i)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(e){this.#R(),this.#l=e,!(ae||L(this.options.enabled,this.#e)===!1||!pe(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||Ke.isFocused())&&this.#h()},this.#l))}#C(){this.#g(),this.#b(this.#y())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#R(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const i=this.#e,o=this.options,c=this.#t,f=this.#r,m=this.#i,s=e!==i?e.state:this.#n,{state:r}=e;let n={...r},a=!1,l;if(t._optimisticResults){const P=this.hasListeners(),N=!P&&ye(e,t),A=P&&be(e,i,t,o);(N||A)&&(n={...n,...Ye(r.data,e.options)}),t._optimisticResults==="isRestoring"&&(n.fetchStatus="idle")}let{error:d,errorUpdatedAt:u,status:g}=n;l=n.data;let y=!1;if(t.placeholderData!==void 0&&l===void 0&&g==="pending"){let P;c?.isPlaceholderData&&t.placeholderData===m?.placeholderData?(P=c.data,y=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,P!==void 0&&(g="success",l=me(c?.data,P,t),a=!0)}if(t.select&&l!==void 0&&!y)if(c&&l===f?.data&&t.select===this.#m)l=this.#d;else try{this.#m=t.select,l=t.select(l),l=me(c?.data,l,t),this.#d=l,this.#a=null}catch(P){this.#a=P}this.#a&&(d=this.#a,l=this.#d,u=Date.now(),g="error");const E=n.fetchStatus==="fetching",w=g==="pending",b=g==="error",S=w&&E,T=l!==void 0,x={status:g,fetchStatus:n.fetchStatus,isPending:w,isSuccess:g==="success",isError:b,isInitialLoading:S,isLoading:S,data:l,dataUpdatedAt:n.dataUpdatedAt,error:d,errorUpdatedAt:u,failureCount:n.fetchFailureCount,failureReason:n.fetchFailureReason,errorUpdateCount:n.errorUpdateCount,isFetched:n.dataUpdateCount>0||n.errorUpdateCount>0,isFetchedAfterMount:n.dataUpdateCount>s.dataUpdateCount||n.errorUpdateCount>s.errorUpdateCount,isFetching:E,isRefetching:E&&!w,isLoadingError:b&&!T,isPaused:n.fetchStatus==="paused",isPlaceholderData:a,isRefetchError:b&&T,isStale:de(e,t),refetch:this.refetch,promise:this.#o,isEnabled:L(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=O=>{x.status==="error"?O.reject(x.error):x.data!==void 0&&O.resolve(x.data)},N=()=>{const O=this.#o=x.promise=fe();P(O)},A=this.#o;switch(A.status){case"pending":e.queryHash===i.queryHash&&P(A);break;case"fulfilled":(x.status==="error"||x.data!==A.value)&&N();break;case"rejected":(x.status!=="error"||x.error!==A.reason)&&N();break}}return x}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#i=this.options,this.#r.data!==void 0&&(this.#f=this.#e),ee(t,e))return;this.#t=t;const i=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!this.#p.size)return!0;const f=new Set(c??this.#p);return this.options.throwOnError&&f.add("error"),Object.keys(this.#t).some(m=>{const C=m;return this.#t[C]!==e[C]&&f.has(C)})};this.#E({listeners:i()})}#w(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#C()}#E(e){ne.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Xe(e,t){return L(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ye(e,t){return Xe(e,t)||e.state.data!==void 0&&le(e,t,t.refetchOnMount)}function le(e,t,i){if(L(t.enabled,e)!==!1&&Y(t.staleTime,e)!=="static"){const o=typeof i=="function"?i(e):i;return o==="always"||o!==!1&&de(e,t)}return!1}function be(e,t,i,o){return(e!==t||L(o.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&de(e,i)}function de(e,t){return L(t.enabled,e)!==!1&&e.isStaleByTime(Y(t.staleTime,e))}function Ze(e,t){return!ee(e.getCurrentResult(),t)}var qe=class extends je{#s;#e=void 0;#n;#t;constructor(e,t){super(),this.#s=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#s.defaultMutationOptions(e),ee(this.options,t)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&ge(t.mutationKey)!==ge(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#i(e)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#i()}mutate(e,t){return this.#t=t,this.#n?.removeObserver(this),this.#n=this.#s.getMutationCache().build(this.#s,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??Ve();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){ne.batch(()=>{if(this.#t&&this.hasListeners()){const t=this.#e.variables,i=this.#e.context;e?.type==="success"?(this.#t.onSuccess?.(e.data,t,i),this.#t.onSettled?.(e.data,null,t,i)):e?.type==="error"&&(this.#t.onError?.(e.error,t,i),this.#t.onSettled?.(void 0,e.error,t,i))}this.listeners.forEach(t=>{t(this.#e)})})}},ke=R.createContext(!1),et=()=>R.useContext(ke);ke.Provider;function tt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var st=R.createContext(tt()),nt=()=>R.useContext(st),rt=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},it=e=>{R.useEffect(()=>{e.clearReset()},[e])},ot=({result:e,errorResetBoundary:t,throwOnError:i,query:o,suspense:c})=>e.isError&&!t.isReset()&&!e.isFetching&&o&&(c&&e.data===void 0||Te(i,[e.error,o])),at=e=>{if(e.suspense){const t=o=>o==="static"?o:Math.max(o??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...o)=>t(i(...o)):t(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},lt=(e,t)=>e.isLoading&&e.isFetching&&!t,ct=(e,t)=>e?.suspense&&t.isPending,Ce=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function ut(e,t,i){const o=et(),c=nt(),f=he(),m=f.defaultQueryOptions(e);f.getDefaultOptions().queries?._experimental_beforeQuery?.(m),m._optimisticResults=o?"isRestoring":"optimistic",at(m),rt(m,c),it(c);const C=!f.getQueryCache().get(m.queryHash),[s]=R.useState(()=>new t(f,m)),r=s.getOptimisticResult(m),n=!o&&e.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(a=>{const l=n?s.subscribe(ne.batchCalls(a)):te;return s.updateResult(),l},[s,n]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),R.useEffect(()=>{s.setOptions(m)},[m,s]),ct(m,r))throw Ce(m,s,c);if(ot({result:r,errorResetBoundary:c,throwOnError:m.throwOnError,query:f.getQueryCache().get(m.queryHash),suspense:m.suspense}))throw r.error;return f.getDefaultOptions().queries?._experimental_afterQuery?.(m,r),m.experimental_prefetchInRender&&!ae&&lt(r,o)&&(C?Ce(m,s,c):f.getQueryCache().get(m.queryHash)?.promise)?.catch(te).finally(()=>{s.updateResult()}),m.notifyOnChangeProps?r:s.trackResult(r)}function ve(e,t){return ut(e,Je)}function Re(e,t){const i=he(),[o]=R.useState(()=>new qe(i,e));R.useEffect(()=>{o.setOptions(e)},[o,e]);const c=R.useSyncExternalStore(R.useCallback(m=>o.subscribe(ne.batchCalls(m)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),f=R.useCallback((m,C)=>{o.mutate(m,C).catch(te)},[o]);if(c.error&&Te(o.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:f,mutateAsync:c.mutate}}var ht=Object.defineProperty,se=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,we=(e,t,i)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ce=(e,t)=>{for(var i in t||(t={}))Ae.call(t,i)&&we(e,i,t[i]);if(se)for(var i of se(t))Ne.call(t,i)&&we(e,i,t[i]);return e},ue=(e,t)=>{var i={};for(var o in e)Ae.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&se)for(var o of se(e))t.indexOf(o)<0&&Ne.call(e,o)&&(i[o]=e[o]);return i};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var _;(e=>{const t=class v{constructor(s,r,n,a){if(this.version=s,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],s<v.MIN_VERSION||s>v.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=s*4+17;let l=[];for(let u=0;u<this.size;u++)l.push(!1);for(let u=0;u<this.size;u++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();const d=this.addEccAndInterleave(n);if(this.drawCodewords(d),a==-1){let u=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const y=this.getPenaltyScore();y<u&&(a=g,u=y),this.applyMask(g)}}c(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}static encodeText(s,r){const n=e.QrSegment.makeSegments(s);return v.encodeSegments(n,r)}static encodeBinary(s,r){const n=e.QrSegment.makeBytes(s);return v.encodeSegments([n],r)}static encodeSegments(s,r,n=1,a=40,l=-1,d=!0){if(!(v.MIN_VERSION<=n&&n<=a&&a<=v.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let u,g;for(u=n;;u++){const b=v.getNumDataCodewords(u,r)*8,S=m.getTotalBits(s,u);if(S<=b){g=S;break}if(u>=a)throw new RangeError("Data too long")}for(const b of[v.Ecc.MEDIUM,v.Ecc.QUARTILE,v.Ecc.HIGH])d&&g<=v.getNumDataCodewords(u,b)*8&&(r=b);let y=[];for(const b of s){i(b.mode.modeBits,4,y),i(b.numChars,b.mode.numCharCountBits(u),y);for(const S of b.getData())y.push(S)}c(y.length==g);const E=v.getNumDataCodewords(u,r)*8;c(y.length<=E),i(0,Math.min(4,E-y.length),y),i(0,(8-y.length%8)%8,y),c(y.length%8==0);for(let b=236;y.length<E;b^=253)i(b,8,y);let w=[];for(;w.length*8<y.length;)w.push(0);return y.forEach((b,S)=>w[S>>>3]|=b<<7-(S&7)),new v(u,r,w,l)}getModule(s,r){return 0<=s&&s<this.size&&0<=r&&r<this.size&&this.modules[r][s]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const s=this.getAlignmentPatternPositions(),r=s.length;for(let n=0;n<r;n++)for(let a=0;a<r;a++)n==0&&a==0||n==0&&a==r-1||n==r-1&&a==0||this.drawAlignmentPattern(s[n],s[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(s){const r=this.errorCorrectionLevel.formatBits<<3|s;let n=r;for(let l=0;l<10;l++)n=n<<1^(n>>>9)*1335;const a=(r<<10|n)^21522;c(a>>>15==0);for(let l=0;l<=5;l++)this.setFunctionModule(8,l,o(a,l));this.setFunctionModule(8,7,o(a,6)),this.setFunctionModule(8,8,o(a,7)),this.setFunctionModule(7,8,o(a,8));for(let l=9;l<15;l++)this.setFunctionModule(14-l,8,o(a,l));for(let l=0;l<8;l++)this.setFunctionModule(this.size-1-l,8,o(a,l));for(let l=8;l<15;l++)this.setFunctionModule(8,this.size-15+l,o(a,l));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let s=this.version;for(let n=0;n<12;n++)s=s<<1^(s>>>11)*7973;const r=this.version<<12|s;c(r>>>18==0);for(let n=0;n<18;n++){const a=o(r,n),l=this.size-11+n%3,d=Math.floor(n/3);this.setFunctionModule(l,d,a),this.setFunctionModule(d,l,a)}}drawFinderPattern(s,r){for(let n=-4;n<=4;n++)for(let a=-4;a<=4;a++){const l=Math.max(Math.abs(a),Math.abs(n)),d=s+a,u=r+n;0<=d&&d<this.size&&0<=u&&u<this.size&&this.setFunctionModule(d,u,l!=2&&l!=4)}}drawAlignmentPattern(s,r){for(let n=-2;n<=2;n++)for(let a=-2;a<=2;a++)this.setFunctionModule(s+a,r+n,Math.max(Math.abs(a),Math.abs(n))!=1)}setFunctionModule(s,r,n){this.modules[r][s]=n,this.isFunction[r][s]=!0}addEccAndInterleave(s){const r=this.version,n=this.errorCorrectionLevel;if(s.length!=v.getNumDataCodewords(r,n))throw new RangeError("Invalid argument");const a=v.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],l=v.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],d=Math.floor(v.getNumRawDataModules(r)/8),u=a-d%a,g=Math.floor(d/a);let y=[];const E=v.reedSolomonComputeDivisor(l);for(let b=0,S=0;b<a;b++){let T=s.slice(S,S+g-l+(b<u?0:1));S+=T.length;const F=v.reedSolomonComputeRemainder(T,E);b<u&&T.push(0),y.push(T.concat(F))}let w=[];for(let b=0;b<y[0].length;b++)y.forEach((S,T)=>{(b!=g-l||T>=u)&&w.push(S[b])});return c(w.length==d),w}drawCodewords(s){if(s.length!=Math.floor(v.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let r=0;for(let n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(let a=0;a<this.size;a++)for(let l=0;l<2;l++){const d=n-l,g=(n+1&2)==0?this.size-1-a:a;!this.isFunction[g][d]&&r<s.length*8&&(this.modules[g][d]=o(s[r>>>3],7-(r&7)),r++)}}c(r==s.length*8)}applyMask(s){if(s<0||s>7)throw new RangeError("Mask value out of range");for(let r=0;r<this.size;r++)for(let n=0;n<this.size;n++){let a;switch(s){case 0:a=(n+r)%2==0;break;case 1:a=r%2==0;break;case 2:a=n%3==0;break;case 3:a=(n+r)%3==0;break;case 4:a=(Math.floor(n/3)+Math.floor(r/2))%2==0;break;case 5:a=n*r%2+n*r%3==0;break;case 6:a=(n*r%2+n*r%3)%2==0;break;case 7:a=((n+r)%2+n*r%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[r][n]&&a&&(this.modules[r][n]=!this.modules[r][n])}}getPenaltyScore(){let s=0;for(let l=0;l<this.size;l++){let d=!1,u=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[l][y]==d?(u++,u==5?s+=v.PENALTY_N1:u>5&&s++):(this.finderPenaltyAddHistory(u,g),d||(s+=this.finderPenaltyCountPatterns(g)*v.PENALTY_N3),d=this.modules[l][y],u=1);s+=this.finderPenaltyTerminateAndCount(d,u,g)*v.PENALTY_N3}for(let l=0;l<this.size;l++){let d=!1,u=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][l]==d?(u++,u==5?s+=v.PENALTY_N1:u>5&&s++):(this.finderPenaltyAddHistory(u,g),d||(s+=this.finderPenaltyCountPatterns(g)*v.PENALTY_N3),d=this.modules[y][l],u=1);s+=this.finderPenaltyTerminateAndCount(d,u,g)*v.PENALTY_N3}for(let l=0;l<this.size-1;l++)for(let d=0;d<this.size-1;d++){const u=this.modules[l][d];u==this.modules[l][d+1]&&u==this.modules[l+1][d]&&u==this.modules[l+1][d+1]&&(s+=v.PENALTY_N2)}let r=0;for(const l of this.modules)r=l.reduce((d,u)=>d+(u?1:0),r);const n=this.size*this.size,a=Math.ceil(Math.abs(r*20-n*10)/n)-1;return c(0<=a&&a<=9),s+=a*v.PENALTY_N4,c(0<=s&&s<=2568888),s}getAlignmentPatternPositions(){if(this.version==1)return[];{const s=Math.floor(this.version/7)+2,r=this.version==32?26:Math.ceil((this.version*4+4)/(s*2-2))*2;let n=[6];for(let a=this.size-7;n.length<s;a-=r)n.splice(1,0,a);return n}}static getNumRawDataModules(s){if(s<v.MIN_VERSION||s>v.MAX_VERSION)throw new RangeError("Version number out of range");let r=(16*s+128)*s+64;if(s>=2){const n=Math.floor(s/7)+2;r-=(25*n-10)*n-55,s>=7&&(r-=36)}return c(208<=r&&r<=29648),r}static getNumDataCodewords(s,r){return Math.floor(v.getNumRawDataModules(s)/8)-v.ECC_CODEWORDS_PER_BLOCK[r.ordinal][s]*v.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][s]}static reedSolomonComputeDivisor(s){if(s<1||s>255)throw new RangeError("Degree out of range");let r=[];for(let a=0;a<s-1;a++)r.push(0);r.push(1);let n=1;for(let a=0;a<s;a++){for(let l=0;l<r.length;l++)r[l]=v.reedSolomonMultiply(r[l],n),l+1<r.length&&(r[l]^=r[l+1]);n=v.reedSolomonMultiply(n,2)}return r}static reedSolomonComputeRemainder(s,r){let n=r.map(a=>0);for(const a of s){const l=a^n.shift();n.push(0),r.forEach((d,u)=>n[u]^=v.reedSolomonMultiply(d,l))}return n}static reedSolomonMultiply(s,r){if(s>>>8||r>>>8)throw new RangeError("Byte out of range");let n=0;for(let a=7;a>=0;a--)n=n<<1^(n>>>7)*285,n^=(r>>>a&1)*s;return c(n>>>8==0),n}finderPenaltyCountPatterns(s){const r=s[1];c(r<=this.size*3);const n=r>0&&s[2]==r&&s[3]==r*3&&s[4]==r&&s[5]==r;return(n&&s[0]>=r*4&&s[6]>=r?1:0)+(n&&s[6]>=r*4&&s[0]>=r?1:0)}finderPenaltyTerminateAndCount(s,r,n){return s&&(this.finderPenaltyAddHistory(r,n),r=0),r+=this.size,this.finderPenaltyAddHistory(r,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(s,r){r[0]==0&&(s+=this.size),r.pop(),r.unshift(s)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function i(C,s,r){if(s<0||s>31||C>>>s)throw new RangeError("Value out of range");for(let n=s-1;n>=0;n--)r.push(C>>>n&1)}function o(C,s){return(C>>>s&1)!=0}function c(C){if(!C)throw new Error("Assertion error")}const f=class M{constructor(s,r,n){if(this.mode=s,this.numChars=r,this.bitData=n,r<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(s){let r=[];for(const n of s)i(n,8,r);return new M(M.Mode.BYTE,s.length,r)}static makeNumeric(s){if(!M.isNumeric(s))throw new RangeError("String contains non-numeric characters");let r=[];for(let n=0;n<s.length;){const a=Math.min(s.length-n,3);i(parseInt(s.substring(n,n+a),10),a*3+1,r),n+=a}return new M(M.Mode.NUMERIC,s.length,r)}static makeAlphanumeric(s){if(!M.isAlphanumeric(s))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r=[],n;for(n=0;n+2<=s.length;n+=2){let a=M.ALPHANUMERIC_CHARSET.indexOf(s.charAt(n))*45;a+=M.ALPHANUMERIC_CHARSET.indexOf(s.charAt(n+1)),i(a,11,r)}return n<s.length&&i(M.ALPHANUMERIC_CHARSET.indexOf(s.charAt(n)),6,r),new M(M.Mode.ALPHANUMERIC,s.length,r)}static makeSegments(s){return s==""?[]:M.isNumeric(s)?[M.makeNumeric(s)]:M.isAlphanumeric(s)?[M.makeAlphanumeric(s)]:[M.makeBytes(M.toUtf8ByteArray(s))]}static makeEci(s){let r=[];if(s<0)throw new RangeError("ECI assignment value out of range");if(s<128)i(s,8,r);else if(s<16384)i(2,2,r),i(s,14,r);else if(s<1e6)i(6,3,r),i(s,21,r);else throw new RangeError("ECI assignment value out of range");return new M(M.Mode.ECI,0,r)}static isNumeric(s){return M.NUMERIC_REGEX.test(s)}static isAlphanumeric(s){return M.ALPHANUMERIC_REGEX.test(s)}getData(){return this.bitData.slice()}static getTotalBits(s,r){let n=0;for(const a of s){const l=a.mode.numCharCountBits(r);if(a.numChars>=1<<l)return 1/0;n+=4+l+a.bitData.length}return n}static toUtf8ByteArray(s){s=encodeURI(s);let r=[];for(let n=0;n<s.length;n++)s.charAt(n)!="%"?r.push(s.charCodeAt(n)):(r.push(parseInt(s.substring(n+1,n+3),16)),n+=2);return r}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let m=f;e.QrSegment=f})(_||(_={}));(e=>{(t=>{const i=class{constructor(c,f){this.ordinal=c,this.formatBits=f}};i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),t.Ecc=i})(e.QrCode||(e.QrCode={}))})(_||(_={}));(e=>{(t=>{const i=class{constructor(c,f){this.modeBits=c,this.numBitsCharCount=f}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),t.Mode=i})(e.QrSegment||(e.QrSegment={}))})(_||(_={}));var G=_;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var dt={L:G.QrCode.Ecc.LOW,M:G.QrCode.Ecc.MEDIUM,Q:G.QrCode.Ecc.QUARTILE,H:G.QrCode.Ecc.HIGH},De=128,Ue="L",Le="#FFFFFF",Fe="#000000",Qe=!1,Be=1,ft=4,pt=0,mt=.1;function _e(e,t=0){const i=[];return e.forEach(function(o,c){let f=null;o.forEach(function(m,C){if(!m&&f!==null){i.push(`M${f+t} ${c+t}h${C-f}v1H${f+t}z`),f=null;return}if(C===o.length-1){if(!m)return;f===null?i.push(`M${C+t},${c+t} h1v1H${C+t}z`):i.push(`M${f+t},${c+t} h${C+1-f}v1H${f+t}z`);return}m&&f===null&&(f=C)})}),i.join("")}function ze(e,t){return e.slice().map((i,o)=>o<t.y||o>=t.y+t.h?i:i.map((c,f)=>f<t.x||f>=t.x+t.w?c:!1))}function gt(e,t,i,o){if(o==null)return null;const c=e.length+i*2,f=Math.floor(t*mt),m=c/t,C=(o.width||f)*m,s=(o.height||f)*m,r=o.x==null?e.length/2-C/2:o.x*m,n=o.y==null?e.length/2-s/2:o.y*m,a=o.opacity==null?1:o.opacity;let l=null;if(o.excavate){let u=Math.floor(r),g=Math.floor(n),y=Math.ceil(C+r-u),E=Math.ceil(s+n-g);l={x:u,y:g,w:y,h:E}}const d=o.crossOrigin;return{x:r,y:n,h:s,w:C,excavation:l,opacity:a,crossOrigin:d}}function yt(e,t){return t!=null?Math.max(Math.floor(t),0):e?ft:pt}function $e({value:e,level:t,minVersion:i,includeMargin:o,marginSize:c,imageSettings:f,size:m,boostLevel:C}){let s=j.useMemo(()=>{const u=(Array.isArray(e)?e:[e]).reduce((g,y)=>(g.push(...G.QrSegment.makeSegments(y)),g),[]);return G.QrCode.encodeSegments(u,dt[t],i,void 0,void 0,C)},[e,t,i,C]);const{cells:r,margin:n,numCells:a,calculatedImageSettings:l}=j.useMemo(()=>{let d=s.getModules();const u=yt(o,c),g=d.length+u*2,y=gt(d,m,u,f);return{cells:d,margin:u,numCells:g,calculatedImageSettings:y}},[s,m,f,o,c]);return{qrcode:s,margin:n,cells:r,numCells:a,calculatedImageSettings:l}}var bt=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Ct=j.forwardRef(function(t,i){const o=t,{value:c,size:f=De,level:m=Ue,bgColor:C=Le,fgColor:s=Fe,includeMargin:r=Qe,minVersion:n=Be,boostLevel:a,marginSize:l,imageSettings:d}=o,g=ue(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:y}=g,E=ue(g,["style"]),w=d?.src,b=j.useRef(null),S=j.useRef(null),T=j.useCallback(D=>{b.current=D,typeof i=="function"?i(D):i&&(i.current=D)},[i]),[F,x]=j.useState(!1),{margin:P,cells:N,numCells:A,calculatedImageSettings:O}=$e({value:c,level:m,minVersion:n,boostLevel:a,includeMargin:r,marginSize:l,imageSettings:d,size:f});j.useEffect(()=>{if(b.current!=null){const D=b.current,U=D.getContext("2d");if(!U)return;let z=N;const Q=S.current,J=O!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;J&&O.excavation!=null&&(z=ze(N,O.excavation));const X=window.devicePixelRatio||1;D.height=D.width=f*X;const Z=f/A*X;U.scale(Z,Z),U.fillStyle=C,U.fillRect(0,0,A,A),U.fillStyle=s,bt?U.fill(new Path2D(_e(z,P))):N.forEach(function(p,I){p.forEach(function(k,K){k&&U.fillRect(K+P,I+P,1,1)})}),O&&(U.globalAlpha=O.opacity),J&&U.drawImage(Q,O.x+P,O.y+P,O.w,O.h)}}),j.useEffect(()=>{x(!1)},[w]);const V=ce({height:f,width:f},y);let W=null;return w!=null&&(W=j.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{x(!0)},ref:S,crossOrigin:O?.crossOrigin})),j.createElement(j.Fragment,null,j.createElement("canvas",ce({style:V,height:f,width:f,ref:T,role:"img"},E)),W)});Ct.displayName="QRCodeCanvas";var He=j.forwardRef(function(t,i){const o=t,{value:c,size:f=De,level:m=Ue,bgColor:C=Le,fgColor:s=Fe,includeMargin:r=Qe,minVersion:n=Be,boostLevel:a,title:l,marginSize:d,imageSettings:u}=o,g=ue(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:y,cells:E,numCells:w,calculatedImageSettings:b}=$e({value:c,level:m,minVersion:n,boostLevel:a,includeMargin:r,marginSize:d,imageSettings:u,size:f});let S=E,T=null;u!=null&&b!=null&&(b.excavation!=null&&(S=ze(E,b.excavation)),T=j.createElement("image",{href:u.src,height:b.h,width:b.w,x:b.x+y,y:b.y+y,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const F=_e(S,y);return j.createElement("svg",ce({height:f,width:f,viewBox:`0 0 ${w} ${w}`,ref:i,role:"img"},g),!!l&&j.createElement("title",null,l),j.createElement("path",{fill:C,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),j.createElement("path",{fill:s,d:F,shapeRendering:"crispEdges"}),T)});He.displayName="QRCodeSVG";const $={pantry:{entries:(e,t)=>["pantry","entries",e,t],nameDb:e=>["pantry","nameDb",e]}},Ge="pantry.session.config.v1",Ee="pantry_uid",vt=({onClick:e,title:t})=>h.jsx("button",{type:"button",onClick:e,title:t??"Settings",style:{background:"none",border:"1px solid #ddd",borderRadius:6,cursor:"pointer",padding:"4px 8px",marginLeft:8},"aria-label":"Open settings",children:"⚙️ Settings"}),Rt=({open:e,onClose:t,children:i,title:o})=>e?h.jsx("div",{role:"dialog","aria-modal":"true","aria-label":o,onClick:c=>{c.target===c.currentTarget&&t()},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",padding:16,zIndex:1e3},children:h.jsxs("div",{style:{background:"white",borderRadius:8,padding:16,minWidth:320,maxWidth:720,width:"100%"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[h.jsx("h3",{style:{margin:0},children:o}),h.jsx("button",{type:"button",onClick:t,"aria-label":"Close",style:{background:"none",border:"none",fontSize:20,cursor:"pointer"},children:"✖"})]}),i]})}):null,q=({label:e,children:t,...i})=>h.jsxs("div",{style:{marginBottom:12},...i,children:[h.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6},children:e}),t]}),H=({children:e,...t})=>h.jsx("button",{...t,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #ccc",background:"#f7f7f7",cursor:"pointer"},children:e}),B=({children:e,style:t})=>h.jsx("div",{style:{fontSize:12,color:"#555",...t||{}},children:e}),Se=({children:e,style:t})=>h.jsx("div",{style:{color:"#c00",fontSize:12,...t||{}},children:e});function xe(){const e=window.location.hash.replace(/^#/,"");if(!e)return{};const t=new URLSearchParams(e),i=t.get("pid")||void 0,o=t.get("key")||t.get("basket")||void 0,c={};return i&&(c.pid=i),o&&(c.key=o),c}function Me(){window.location.hash&&history.replaceState(null,"",`${window.location.pathname}${window.location.search}`)}function Ie(){try{const e=sessionStorage.getItem(Ge);if(!e)return null;const t=JSON.parse(e);return t?.pid&&t?.key?t:null}catch{return null}}function Pe(e){sessionStorage.setItem(Ge,JSON.stringify(e))}function wt(e){const t=e+"=",i=(document.cookie||"").split("; ").filter(Boolean);for(const o of i)if(o.startsWith(t))return decodeURIComponent(o.slice(t.length));return null}function Et(e){if(/^\d+\.\d+\.\d+\.\d+$/.test(e)||e==="localhost")return null;const t=e.split(".");return t.length<2?null:"."+t.slice(-2).join(".")}function St(e,t,i=3650){const o=Et(location.hostname),c=["path=/","SameSite=Lax",`Max-Age=${i*24*60*60}`];o&&c.push(`domain=${o}`),document.cookie=`${encodeURIComponent(e)}=${encodeURIComponent(t)}; ${c.join("; ")}`}function xt(){let e=wt(Ee);return e||(e=crypto?.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2)+Date.now().toString(36),St(Ee,e)),e}async function Mt(e,t){const i=`https://getpantry.cloud/apiv1/pantry/${encodeURIComponent(e)}/basket/${encodeURIComponent(t)}`,o=await fetch(i,{method:"GET"});if(o.status===404)return{};if(!o.ok)throw new Error(`Pantry GET failed: ${o.status}`);if((o.headers.get("content-type")||"").includes("application/json")){const m=await o.json();return m&&typeof m=="object"?m:{}}const f=await o.text();try{const m=JSON.parse(f);return m&&typeof m=="object"?m:{}}catch{return{}}}async function It(e,t,i){const o=`https://getpantry.cloud/apiv1/pantry/${encodeURIComponent(e)}/basket/${encodeURIComponent(t)}`,c=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i??{})});if(!c.ok)throw new Error(`Pantry PUT failed: ${c.status}`)}async function Oe(e,t){const i=`https://getpantry.cloud/apiv1/pantry/${encodeURIComponent(e)}/basket/${encodeURIComponent(t)}`,o=await fetch(i,{method:"GET"});if(o.status===404)return{};if(!o.ok)throw new Error(`Pantry GET failed: ${o.status}`);if((o.headers.get("content-type")||"").includes("application/json"))return await o.json();const f=await o.text();try{return JSON.parse(f)}catch{return{}}}async function Pt(e,t,i){const o=`https://getpantry.cloud/apiv1/pantry/${encodeURIComponent(e)}/basket/${encodeURIComponent(t)}`,c=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i??{})});if(!c.ok)throw new Error(`Pantry PUT failed: ${c.status}`)}async function Ot(e,t,i){const o=`https://getpantry.cloud/apiv1/pantry/${encodeURIComponent(e)}/basket/${encodeURIComponent(t)}`,c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i??{})});if(!c.ok)throw new Error(`Pantry POST failed: ${c.status}`)}const jt=()=>{const[e,t]=R.useState(()=>{const p=xe();if(p.pid&&p.key){const I={pid:p.pid,key:p.key};return Pe(I),Me(),I}return Ie()}),[i,o]=R.useState(!1),[c,f]=R.useState(""),m=R.useRef(!0),C=R.useMemo(()=>xt(),[]),s=he(),[r,n]=R.useState(""),[a,l]=R.useState(!1);R.useEffect(()=>(m.current=!0,()=>{m.current=!1}),[]);const d=!!e?.pid&&!!e?.key,u=ve({queryKey:e?$.pantry.entries(e.pid,e.key):["pantry","entries","disabled"],queryFn:async()=>Mt(e.pid,e.key),enabled:d}),g=ve({queryKey:e?$.pantry.nameDb(e.pid):["pantry","nameDb","disabled"],queryFn:async()=>{try{return await Oe(e.pid,"_nameDb")}catch{return{}}},enabled:d});R.useEffect(()=>{if(!d)return;const p=u.data||{},I=p&&typeof p=="object"&&C in p?String(p[C]):"";f(I)},[u.data,d,C]);const y=Re({mutationFn:async p=>{const k={...s.getQueryData($.pantry.entries(e.pid,e.key))??{},[C]:p??""};return await It(e.pid,e.key,k),k},onSuccess:p=>{s.setQueryData($.pantry.entries(e.pid,e.key),p),s.invalidateQueries({queryKey:$.pantry.nameDb(e.pid)})}}),E=Re({mutationFn:async p=>{let I=g.data||{};try{(!I||Object.keys(I).length===0)&&(I=await Oe(e.pid,"_nameDb"))}catch{}const k={...I.names||{}},K={...I.users||{}},re=K[C];let ie=(k[p]??0)+1;re&&re[0]===p&&(ie=Number(re[1])||1),k[p]=Math.max(ie,k[p]??0),K[C]=[p,ie];const oe={names:k,users:K};try{await Ot(e.pid,"_nameDb",oe)}catch{await Pt(e.pid,"_nameDb",oe)}return oe},onSuccess:p=>{s.setQueryData($.pantry.nameDb(e.pid),p)}}),w=R.useCallback(p=>{if(!p)return null;const[I,k]=p;return k&&k>1?`${I}(${k})`:I||null},[]),b=R.useMemo(()=>g.data||{},[g.data]),S=R.useCallback(p=>{if(p===C)return"you";const I=b.users?.[p];return w(I)||"anonymous"},[C,b,w]),T=R.useMemo(()=>{const p=b.users?.[C];return w(p)||"you"},[b,C,w]),F=R.useMemo(()=>Object.entries(u.data||{}),[u.data]),x=R.useMemo(()=>{if(!e?.pid||!e?.key)return"";const p=new URLSearchParams;return p.set("pid",e.pid),p.set("key",e.key),`${window.location.origin}${window.location.pathname}${window.location.search}#${p.toString()}`},[e]),P=R.useCallback(async()=>{if(x)try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(x);else{const p=document.createElement("textarea");p.value=x,p.style.position="fixed",p.style.left="-1000px",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}l(!0),setTimeout(()=>l(!1),1500)}catch{}},[x]),N=R.useCallback(async()=>{d&&await Promise.allSettled([u.refetch(),g.refetch()])},[d,u,g]),A=u.isFetching||g.isFetching,O=u.error?.message||y.error?.message||E.error?.message||g.error?.message||null,V=R.useMemo(()=>xe(),[]),W=R.useMemo(()=>Ie(),[]),[D,U]=R.useState(W?.pid||V.pid||""),[z,Q]=R.useState(W?.key||V.key||""),J=!!D&&!!z,X=()=>{const p={pid:D.trim(),key:z.trim()};Pe(p),t(p),Me(),o(!1),setTimeout(()=>{N()},0)},Z=R.useCallback(()=>{if(!d)return;const p=r.trim();p&&(p.includes("(")||p.includes(")")||p.length>10||E.mutate(p))},[d,r,E]);return h.jsxs("div",{style:{padding:16},children:[h.jsxs("header",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[h.jsx("h2",{style:{margin:0},children:"Pantry wall"}),h.jsx(vt,{onClick:()=>o(!0)}),h.jsx(H,{onClick:P,disabled:!x,children:"Share"}),a&&h.jsx(B,{children:"Copied!"})]}),x&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16,flexWrap:"wrap"},children:[h.jsxs("div",{children:[h.jsx(B,{children:"Scan to join this wall:"}),h.jsx(He,{value:x,size:160,includeMargin:!0,"aria-label":"Wall join QR"})]}),h.jsxs("div",{style:{minWidth:260,flex:1},children:[h.jsx(q,{label:"Sharable link",children:h.jsx("input",{type:"text",readOnly:!0,value:x,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc"},onFocus:p=>p.currentTarget.select()})}),h.jsx(B,{children:"Opens with #pid and #key; the app ingests and hides them after load."})]})]}),d&&h.jsxs("div",{style:{border:"1px solid #eee",borderRadius:8,padding:12,marginBottom:16},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[h.jsx("label",{style:{fontWeight:600},children:"Your name"}),h.jsx("input",{type:"text",maxLength:10,value:r,onChange:p=>n(p.target.value),placeholder:"max 10 chars, no ()",style:{padding:6,borderRadius:6,border:"1px solid #ccc"}}),h.jsx(H,{onClick:Z,disabled:E.isPending||!r.trim(),children:E.isPending?"Saving…":"Save name"}),h.jsxs(B,{children:["Display: ",T]})]}),E.isError&&h.jsx(Se,{style:{marginTop:8},children:E.error?.message||"Failed to save name"}),h.jsx(B,{style:{marginTop:6},children:"Names are reserved per base value. If a base name already exists, you get a number, shown in parentheses in chat (e.g., martin(2)). Parentheses are not allowed in input."})]}),!d&&h.jsxs("div",{style:{border:"1px solid #eee",borderRadius:8,padding:16,marginBottom:16,background:"#fafafa"},children:[h.jsx("h3",{style:{marginTop:0},children:"Get started with Pantry"}),h.jsxs("ol",{style:{paddingLeft:18},children:[h.jsxs("li",{children:['Open Pantry in a new tab and click "Create Pantry":'," ",h.jsx("a",{href:"https://getpantry.cloud/",target:"_blank",rel:"noopener noreferrer",children:"getpantry.cloud"})]}),h.jsx("li",{children:"Copy your Pantry ID (a long UUID)."}),h.jsxs("li",{children:["Choose a Basket name (e.g., ",h.jsx("code",{children:"wall"}),")."]}),h.jsx("li",{children:"Click the Settings button above and paste the Pantry ID and Basket name."}),h.jsx("li",{children:"Save Settings. We store them for this session and remove them from the URL."}),h.jsxs("li",{children:["To share, create a link with ",h.jsx("code",{children:"#pid"})," and ",h.jsx("code",{children:"#key"}),"; your friend’s page will ingest it and hide it from the URL."]})]}),h.jsxs(B,{children:["Tip: Manually append ",h.jsx("code",{children:"#pid=<PANTRY_ID>&key=<BASKET>"})," to the URL for a one-time setup; the page will hide it after loading."]})]}),h.jsxs("div",{style:{maxWidth:720},children:[h.jsx(q,{label:"Your note",children:h.jsx("input",{type:"text",value:c,onChange:p=>f(p.target.value),disabled:!d,placeholder:d?"Type your value…":"Configure Pantry in Settings",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc"}})}),h.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[h.jsx(H,{onClick:N,disabled:!d||A,children:A?"Refreshing…":"Refresh"}),h.jsx(H,{onClick:()=>y.mutate(c),disabled:!d||y.isPending,children:y.isPending?"Saving…":"Save to Pantry"})]}),O&&h.jsx(Se,{style:{marginTop:8},children:O}),d&&h.jsxs("div",{style:{marginTop:24},children:[h.jsx("h3",{style:{marginTop:0},children:"Wall"}),F.length===0&&h.jsx(B,{children:"No entries yet."}),h.jsx("ul",{style:{listStyle:"none",paddingLeft:0},children:F.map(([p,I])=>h.jsxs("li",{style:{borderBottom:"1px solid #eee",padding:"8px 0"},children:[h.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:h.jsx("span",{style:{fontSize:12,color:"#666"},children:S(p)})}),h.jsx("div",{style:{whiteSpace:"pre-wrap"},children:String(I??"")})]},p))})]})]}),h.jsxs(Rt,{open:i,onClose:()=>o(!1),title:"Settings",children:[h.jsx(q,{label:"Pantry ID (pid)",children:h.jsx("input",{type:"text",value:D,onChange:p=>U(p.target.value),placeholder:"e.g., 123e4567-e89b-12d3-a456-426614174000",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc"}})}),h.jsx(q,{label:"Basket name (key)",children:h.jsx("input",{type:"text",value:z,onChange:p=>Q(p.target.value),placeholder:"e.g., wall",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc"}})}),h.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[h.jsx(H,{onClick:()=>o(!1),children:"Cancel"}),h.jsx(H,{onClick:X,disabled:!J,children:"Save"})]})]})]})};function Nt(){return h.jsx(jt,{})}export{Nt as default};
